<!DOCTYPE html>
<html lang="en"><head>
<script src="L1_files/libs/clipboard/clipboard.min.js"></script>
<script src="L1_files/libs/quarto-html/tabby.min.js"></script>
<script src="L1_files/libs/quarto-html/popper.min.js"></script>
<script src="L1_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="L1_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="L1_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="L1_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="L1_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <title>Lecture 1</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="L1_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="L1_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        background-color: #232629;
        color: #7a7c7d;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #7a7c7d;  padding-left: 4px; }
    div.sourceCode
      { color: #cfcfc2; background-color: #232629; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #cfcfc2; } /* Normal */
    code span.al { color: #95da4c; background-color: #4d1f24; font-weight: bold; } /* Alert */
    code span.an { color: #3f8058; } /* Annotation */
    code span.at { color: #2980b9; } /* Attribute */
    code span.bn { color: #f67400; } /* BaseN */
    code span.bu { color: #7f8c8d; } /* BuiltIn */
    code span.cf { color: #fdbc4b; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #3daee9; } /* Char */
    code span.cn { color: #27aeae; font-weight: bold; } /* Constant */
    code span.co { color: #7a7c7d; } /* Comment */
    code span.cv { color: #7f8c8d; } /* CommentVar */
    code span.do { color: #a43340; } /* Documentation */
    code span.dt { color: #2980b9; } /* DataType */
    code span.dv { color: #f67400; } /* DecVal */
    code span.er { color: #da4453; text-decoration: underline; } /* Error */
    code span.ex { color: #0099ff; font-weight: bold; } /* Extension */
    code span.fl { color: #f67400; } /* Float */
    code span.fu { color: #8e44ad; } /* Function */
    code span.im { color: #27ae60; } /* Import */
    code span.in { color: #c45b00; } /* Information */
    code span.kw { color: #cfcfc2; font-weight: bold; } /* Keyword */
    code span.op { color: #cfcfc2; } /* Operator */
    code span.ot { color: #27ae60; } /* Other */
    code span.pp { color: #27ae60; } /* Preprocessor */
    code span.re { color: #2980b9; background-color: #153042; } /* RegionMarker */
    code span.sc { color: #3daee9; } /* SpecialChar */
    code span.ss { color: #da4453; } /* SpecialString */
    code span.st { color: #f44f4f; } /* String */
    code span.va { color: #27aeae; } /* Variable */
    code span.vs { color: #da4453; } /* VerbatimString */
    code span.wa { color: #da4453; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="L1_files/libs/revealjs/dist/theme/quarto.css">
  <link href="L1_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="L1_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="L1_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="L1_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="L1_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="L1_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 1</h1>
  <p class="subtitle">HHU summer term 2024 <br> April 16, 2025 <br> Prof.&nbsp;Dr.&nbsp;Jannis Kück</p>

<div class="quarto-title-authors">
</div>

</section>
<section>
<section id="predictive-inference-with-linear-regression-in-moderately-high-dimensions" class="title-slide slide level1 center">
<h1>Predictive Inference with Linear Regression in Moderately High Dimensions</h1>

</section>
<section id="foundation-of-linear-regression" class="slide level2">
<h2>Foundation of Linear Regression</h2>
<ul>
<li><p>A linear regression model is given by <span class="math display">\[ Y = \beta' X +\varepsilon,\]</span> where <span class="math inline">\(\varepsilon\)</span> is a so called noise term with <span class="math inline">\(\mathbb{E}[\varepsilon]=0\)</span>.</p></li>
<li><p>We consider a scalar random variable <span class="math inline">\(Y\)</span>, an outcome of interest, and a <span class="math inline">\(p\)</span>-dimensional vector of covariates <span class="math inline">\(X=( X_1,\ldots,X_p)'\)</span>. We assume that a constant of <span class="math inline">\(1\)</span> is included as the first component in <span class="math inline">\(X\)</span>; that is, <span class="math inline">\(X_1 =1\)</span>.</p></li>
<li><p>Our first goal is to construct the best linear prediction rule for <span class="math inline">\(Y\)</span> using <span class="math inline">\(X\)</span>. That is, the predicted value of <span class="math inline">\(Y\)</span> given <span class="math inline">\(X\)</span> will be of the linear form: <span class="math display">\[
\sum_{j=1}^p \beta_j X_j =  \beta'X,  \text{ for } \beta = (\beta_1,...,\beta_p)'.
\]</span></p></li>
</ul>
</section>
<section id="best-linear-predictor" class="slide level2">
<h2>Best Linear Predictor</h2>
<ul>
<li>The <span class="math inline">\(\beta\)</span>’s are called the regression parameters or coefficients.</li>
<li>We define <span class="math inline">\(\beta\)</span> as any solution to the <strong>Best Linear Prediction</strong> (BLP) Problem,<span class="math display">\[
\min_{b \in \mathbb{R}^p} \mathbb{E}\left[\left(Y - b'X \right)^2\right],
\]</span></li>
</ul>
<p>where we minimize the Expected or Mean Squared Error (MSE) for predicting <span class="math inline">\(Y\)</span> using the linear rule <span class="math display">\[b'X = \sum_{j=1}^p b_j X_j, \quad b = (b_1,...,b_p)'.\]</span></p>
<div class="fragment">
<ul>
<li>The solution to this optimization problem, <span class="math inline">\(\beta'X\)</span>, is called the <strong>Best Linear Predictor</strong> of <span class="math inline">\(Y\)</span> using <span class="math inline">\(X\)</span>. This jargon refers to the fact that <span class="math inline">\(\beta'X\)</span> is the best, according to Mean Squared Error, linear prediction rule for <span class="math inline">\(Y\)</span> among all possible linear prediction rules.</li>
</ul>
</div>
</section>
<section id="normal-equations" class="slide level2">
<h2>Normal Equations</h2>
<ul>
<li>We can compute an optimal <span class="math inline">\(\beta\)</span> by solving the first order conditions for the BLP problem: <span class="math display">\[
\mathbb{E}[( Y - \beta'X) X] =0.
\]</span> These equations are also referred to as the Normal Equations and are obtained by setting the derivative of the objective function <span class="math inline">\(b \mapsto \mathbb{E}(Y-b'X)^2\)</span> with respect to <span class="math inline">\(b\)</span> equal to zero. Thus, any optimal <span class="math inline">\(b=\beta\)</span> satisfies the Normal Equations (<em>Moment Condition</em>).</li>
</ul>
<div class="fragment">
<ul>
<li>Noting that <span class="math inline">\(\varepsilon = Y-\beta'X\)</span>, we can write the Normal Equations as <span class="math display">\[
\mathbb{E}  [\varepsilon  X]= 0 \text{ or }  \varepsilon \perp X.
\]</span></li>
</ul>
</div>
</section>
<section class="slide level2">

<ul>
<li>Therefore, we obtain the simple decomposition of <span class="math inline">\(Y\)</span>: <span class="math display">\[
  Y = \beta'X + \varepsilon, \quad  \mathbb{E}[ \varepsilon X]  = 0,
  \]</span> where <span class="math inline">\(\beta'X\)</span> is the part of <span class="math inline">\(Y\)</span> that can be linearly predicted or explained with <span class="math inline">\(X\)</span>, and <span class="math inline">\(\varepsilon\)</span> is the remaining unexplained or residual part.</li>
</ul>
<div class="fragment">
<ul>
<li>What about the assumption <span class="math inline">\(E[\varepsilon|X]=0\)</span>?</li>
</ul>
</div>
</section>
<section id="the-best-linear-prediction-problem-in-finite-samples" class="slide level2">
<h2>The Best Linear Prediction Problem in Finite Samples</h2>
<ul>
<li><p>In practice, the researcher does not have access to the entire population, but observes only a sample <span class="math display">\[
(Y_i,X_i)_{i=1}^n =  ( (Y_1, X_1),..., (Y_n, X_n) ).
\]</span></p></li>
<li><p>We assume that this sample is a random sample from a distribution 𝐹, which is the distribution of (𝑌, 𝑋). Formally, this condition means that the observations were obtained as realizations of independently and identically distributed (iid) copies of the random variable (𝑌, 𝑋).</p></li>
<li><p>We construct the best in-sample linear prediction rule for <span class="math inline">\(Y\)</span> using <span class="math inline">\(X\)</span> analogously to the population case by replacing theoretical expected values, <span class="math inline">\(\mathbb{E}\)</span>, with empirical averages <span class="math inline">\(\mathbb{E}_n\)</span> (<em>sample mean</em>), where <span class="math display">\[\mathbb{E}_n[f(Y_i,X_i)] := \frac{1}{n} \sum_{i=1}^n f(Y_i, X_i).
\]</span></p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>Specifically, given <span class="math inline">\(X\)</span>, our predicted value of <span class="math inline">\(Y\)</span> will be <span class="math display">\[
\sum_{j=1}^p \hat \beta_j X_j =  \hat \beta'X,  \text{ for } \hat \beta = (\hat \beta_1,...,\hat \beta_p)',
\]</span> where <span class="math inline">\(\widehat \beta\)</span> is any solution to the <strong>Best Linear Prediction Problem in the Sample</strong>: <span class="math display">\[
\min_{b \in \mathbb{R}^p} \mathbb{E}_n [\left(Y_i - b'X_i \right)^2].
  \]</span> That is, <span class="math inline">\(\hat\beta\)</span> minimizes the Sample Mean Squared Error for predicting <span class="math inline">\(Y\)</span> using the linear rule <span class="math inline">\(b'X\)</span>.</p></li>
<li><p>The <span class="math inline">\(\hat \beta\)</span> is called OLS (<em>ordinary least squares</em>) estimator.</p></li>
</ul>
</section>
<section id="properties-of-sample-linear-regression" class="slide level2">
<h2>Properties of Sample Linear Regression</h2>
<ul>
<li><p>A key question is whether <span class="math inline">\(\hat\beta'X\)</span> approximates (that is, estimates) <span class="math inline">\(\beta'X\)</span> well.</p></li>
<li><p>The fundamental statistical issue is that we are trying to estimate <span class="math inline">\(p\)</span> parameters, <span class="math inline">\(\beta_1,...,\beta_p\)</span>. Intuitively, to estimate each parameter well, we need many observations per parameter. This intuition suggests that <span class="math inline">\(p/n\)</span> should be small, in order for estimation error to be small. The following result captures this intuition more formally.</p></li>
</ul>
<div id="thm-OLS:prop" class="theorem">
<p><span class="theorem-title"><strong>Theorem 1 (Approximation of BLP by OLS)</strong></span> <br>
Under regularity conditions, <span class="math display">\[
\sqrt{\mathbb{E}[( \beta'X - \hat\beta'X)^2]}
\leq  \text{const}_{F}   \cdot \sqrt{\mathbb{E}[\varepsilon^2] } \sqrt{\frac{p}{n}},
\]</span> where the inequality holds with probability approaching 1 as <span class="math inline">\(n \to \infty\)</span>, and <span class="math inline">\(\text{const}_{F}\)</span> is a constant that depends on the distribution <span class="math inline">\(F\)</span> of <span class="math inline">\((Y,X)\)</span>.</p>
</div>
</section>
<section id="goodness-of-fit" class="slide level2">
<h2>Goodness of Fit</h2>
<ul>
<li>We can use the sample/population MSE (Mean Squared Error), <span class="math display">\[
\text{MSE}_{sample} = \mathbb{E}_n [\hat \varepsilon_i^2],\quad \text{MSE}_{pop} = \mathbb{E}[\varepsilon^2]\]</span> or the sample/population <span class="math inline">\(R^2\)</span>, <span class="math display">\[
R^2_{sample} := \frac{\mathbb{E}_n [(\hat\beta'X_i)^2]}{\mathbb{E}_n[Y_i^2]} = 1 - \frac{\mathbb{E}_n [\hat \varepsilon_i^2]}{\mathbb{E}_n[Y_i^2]} \in [0,1], \quad R^2_{pop} := \frac{\mathbb{E}[(\beta'X)^2]}{\mathbb{E}[Y^2]}.
\]</span> to measure the quality of our (linear) model. It is worth noting that <span class="math inline">\(R^2_{pop}\)</span> is the proportion of variation of <span class="math inline">\(Y\)</span> explained by the BLP</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>By the law of large numbers and <a href="#/properties-of-sample-linear-regression" class="quarto-xref">Theorem&nbsp;1</a>, when <span class="math inline">\(p/n\)</span> is small, we have the following approximations: <span class="math display">\[
\mathbb{E}_n[Y_i^2]\approx \mathbb{E}[Y^2], \quad \mathbb{E}_n[(\hat \beta'X_i)^2]\approx \mathbb{E}[(\beta'X)^2], \quad
\mathbb{E}_n[\hat \varepsilon^2_i] \approx \mathbb{E}[\varepsilon^2],
\]</span></p></li>
<li><p>Thus, when <span class="math inline">\(p/n\)</span> is small and <span class="math inline">\(n\)</span> is large, the sample fit measures are good approximations to population fit measures: <span class="math display">\[ \text{MSE}_{sample} \approx  \text{MSE}_{pop} \text{ and } R^2_{sample} \approx R^2_{pop}. \]</span></p></li>
</ul>
</section>
<section id="overfitting-what-happens-when-pn-is-not-small" class="slide level2">
<h2>Overfitting: What happens when <span class="math inline">\(p/n\)</span> is not small?</h2>
<ul>
<li><p>When <span class="math inline">\(p/n\)</span> is not small, the picture about predictive performance of the in-sample BLP becomes inaccurate and possibly misleading.</p></li>
<li><p>Consider an extreme example where <span class="math inline">\(p =n\)</span> and all variables in <span class="math inline">\(X\)</span> are linearly independent. In this case, we have <span class="math display">\[\text{MSE}_{sample} = 0 \text{ and } R^2_{sample} =1\]</span> no matter what <span class="math inline">\(\text{MSE}_{pop}\)</span> and <span class="math inline">\(R^2_{pop}\)</span> are. <strong>Why?</strong></p></li>
<li><p>Therefore, here we have an extreme example of <strong>overfitting</strong>, where the in-sample predictive performance overstates the out-of-sample predictive performance of the linear model.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Example:<br>
</li>
</ul>
<p>Suppose <span class="math inline">\(X \sim N(0,I_p)\)</span> and <span class="math inline">\(Y \sim N(0,1)\)</span> are statistically independent.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1-2"><a href=""></a>n <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb1-3"><a href=""></a>p <span class="ot">&lt;-</span> n</span>
<span id="cb1-4"><a href=""></a>ratio <span class="ot">&lt;-</span> p<span class="sc">/</span>n</span>
<span id="cb1-5"><a href=""></a><span class="fu">cat</span>(<span class="st">"The ratio (p/n) is"</span>, ratio, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The ratio (p/n) is 1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>X <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(n<span class="sc">*</span>p), n, p)</span>
<span id="cb3-2"><a href=""></a>Y <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n)</span>
<span id="cb3-3"><a href=""></a>model <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y<span class="sc">~</span>X)</span>
<span id="cb3-4"><a href=""></a><span class="fu">cat</span>(<span class="st">"R2 is"</span>,<span class="fu">summary</span>(model)<span class="sc">$</span>r.squared, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>R2 is 1 </code></pre>
</div>
</div>
<p>It holds <span class="math inline">\(R^2_{sample}=1\)</span> but <span class="math inline">\(R^2_{pop}=0\)</span>, since the best linear predictor of <span class="math inline">\(Y\)</span> is <span class="math inline">\(\beta'X = 0\)</span>.</p>
<ul>
<li>In the tutorial, we will consider an extensive simulation study to understand overfitting, see <a href="https://colab.research.google.com/drive/1aiYl0OTab5OizA7mVhcWUsvV4p391y8C#scrollTo=AT0pxZJxxVDq">here</a>.</li>
</ul>
</section>
<section id="measuring-predictive-ability-by-sample-splitting" class="slide level2">
<h2>Measuring Predictive Ability by Sample Splitting</h2>
<ul>
<li>How should we measure the predictive ability of the linear model (or other nonlinear models that we discuss) more reliably, even in cases when <span class="math inline">\(p/n\)</span> is not small?</li>
</ul>
<p>A general way to measure predictive performance is to perform <strong>data splitting</strong>. The idea can be summarized in two parts:</p>
<ol type="1">
<li><p>Use a random part of a dataset, called the training sample, for estimating/training the prediction rule.</p></li>
<li><p>Use the other part, called the testing sample, to evaluate the quality of the prediction rule, recording out-of-sample mean squared error and <span class="math inline">\(R^2\)</span>.</p></li>
</ol>
<ul>
<li>Generally, a predictive model is trained on a sample and the real test of its predictive ability happens when “new, unseen” observations arrive. With new observations in hand, we learn how far off our predictions where then compared to the realized values. By partitioning the data set into two parts, we preserve an “unseen” set of observations on which to test our model, mimicking this process of ex-post performance assessment.</li>
</ul>
</section>
<section id="inference-about-predictive-effects-or-association" class="slide level2">
<h2>Inference about Predictive Effects or Association</h2>
<ul>
<li><p>Here we examine inference on so-called predictive effects, which describe how our (population best linear) predictions change if a value of a target regressor changes by a unit while the other regressors remain unchanged.</p></li>
<li><p>Specifically, we partition the vector of regressors <span class="math inline">\(X\)</span> into two components: <span class="math display">\[X = (D, W')',\]</span> where <span class="math inline">\(D\)</span> represents the “target” regressor of interest, and <span class="math inline">\(W\)</span> represents the other regressors, sometimes called the controls.</p></li>
<li><p>We can therefore write <span class="math display">\[ Y = \beta_1D  + \beta_2' W+ \varepsilon.\]</span></p></li>
</ul>
</section>
<section class="slide level2">

<p>“How does the predicted value of <span class="math inline">\(Y\)</span> change if <span class="math inline">\(D\)</span> increases by a unit while <span class="math inline">\(W\)</span> remains unchanged?”</p>
<ul>
<li><p>The answer is the predicted value of <span class="math inline">\(Y\)</span> changes by <span class="math inline">\(\beta_1\)</span>.</p></li>
<li><p>Note that this question is purely about the properties of the predictive rule, and generally has nothing to do with causality.</p></li>
<li><p><strong>Example</strong> (Gender Pay Gap): In the analysis of wages, which we will discuss later in more detail, the question can be formulated as: “What is the difference in predicted wages between men and women with the same job-relevant characteristics?”</p></li>
<li><p>Here, <span class="math inline">\(D\)</span> would represent the female indicator and <span class="math inline">\(W\)</span> represent experience, educational, occupational, and geographic characteristics, the answer to the question is the population regression coefficient <span class="math display">\[\beta_1\]</span> corresponding to <span class="math inline">\(D\)</span>.</p></li>
</ul>
</section>
<section id="understanding-beta_1-via-partialling-out" class="slide level2">
<h2>Understanding <span class="math inline">\(\beta_1\)</span> via “Partialling-Out”</h2>
<ul>
<li><p>“Partialling-out” is an important tool that provides conceptual understanding of the regression coefficient <span class="math inline">\(\beta_1\)</span>.</p></li>
<li><p>In the population, we define the partialling-out operation as a procedure that takes a random variable <span class="math inline">\(V\)</span> and creates a “residual” <span class="math inline">\(\widetilde V\)</span> by subtracting the part of <span class="math inline">\(V\)</span> that is linearly predicted by <span class="math inline">\(W\)</span>: <span class="math display">\[
\widetilde V = V - \gamma_{VW}'W, \quad \gamma_{VW} \in \arg\min_{\gamma} \mathbb{E}[(V - \gamma'W)^2].
\]</span></p></li>
<li><p>When <span class="math inline">\(V\)</span> is a vector, we apply the operation to each component. It can be shown that the partialling-out operation is linear in the sense that <span class="math display">\[Y =V + U  \implies \widetilde Y = \widetilde V + \widetilde U.\]</span></p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>We apply the partialling-out operation to both sides of our regression equation <span class="math display">\[Y = \beta_1 D + \beta_2'W + \varepsilon\]</span> to get <span class="math display">\[
\widetilde Y = \beta_1 \widetilde D  + \beta_2' \widetilde W + \widetilde \varepsilon,
\]</span> which simplifies to the decomposition: <span class="math display">\[
\widetilde Y = \beta_1 \widetilde D+  \varepsilon, \quad \mathbb{E} [\varepsilon \widetilde D] = 0.
\]</span></p></li>
<li><p><strong>Why</strong> does <span class="math inline">\(\widetilde{W}=0\)</span> and <span class="math inline">\(\widetilde{\varepsilon}=\varepsilon\)</span> hold?</p></li>
<li><p>Therefore, <span class="math inline">\(\beta_1\)</span> can be interpreted as a (univariate) linear regression coefficient in the linear regression of <em>residualized</em> <span class="math inline">\(Y\)</span> on <em>residualized</em> <span class="math inline">\(D\)</span>, where the residuals are defined by partialling-out the linear effect of <span class="math inline">\(W\)</span> from <span class="math inline">\(Y\)</span> and <span class="math inline">\(D\)</span>.</p></li>
</ul>
</section>
<section class="slide level2">

<div id="thm-OLS:FWL" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2 (Frisch-Waugh-Lovell, <span class="citation" data-cites="frisch1933partial">Frisch and Waugh (<a href="#/bibliography" role="doc-biblioref" onclick="">1933</a>)</span>, <span class="citation" data-cites="lovell1963seasonal">Lovell (<a href="#/bibliography" role="doc-biblioref" onclick="">1963</a>)</span>, <span class="citation" data-cites="lovell2008simple">Lovell (<a href="#/bibliography" role="doc-biblioref" onclick="">2008</a>)</span>)</strong></span> The population linear regression coefficient <span class="math inline">\(\beta_1\)</span> can be recovered from the population linear regression of <span class="math inline">\(\widetilde Y\)</span> on <span class="math inline">\(\widetilde D\)</span>: <span class="math display">\[
\beta_1 = \arg\min_{b_1} \mathbb{E}[(\widetilde Y - b_1 \widetilde D)^2] =  (\mathbb{E}[ \widetilde D^2])^{-1} \mathbb{E}[\widetilde D \widetilde Y],
\]</span> where we assume <span class="math inline">\(D\)</span> cannot be perfectly predicted by <span class="math inline">\(W\)</span>, i.e.&nbsp;<span class="math inline">\(\mathbb{E}[\widetilde D^2] &gt; 0\)</span>, so <span class="math inline">\(\beta_1\)</span> is uniquely defined.</p>
</div>
</section>
<section class="slide level2">

<ul>
<li><p>When we work with a sample, we simply mimic the partialling-out operation in the population. By the FWL Theorem applied to the sample instead of population, the sample linear regression of <span class="math inline">\(Y\)</span> on <span class="math inline">\(D\)</span> and <span class="math inline">\(W\)</span> gives us the estimator <span class="math display">\[
\hat \beta_1  = \arg\min_{b} \mathbb{E}_n[(\check Y_i  - b \check D_i)^2] = (\mathbb{E}_n[\check D_i ^2])^{-1} \mathbb{E}_n[\check D_i \check Y_i]
\]</span> which corresponds to the standard ols estimator of <span class="math inline">\(\beta_1\)</span>.</p></li>
<li><p><strong>Outlook:</strong> When <span class="math inline">\(p/n\)</span> is not small, using sample linear regression for partialling-out won’t be such a good idea and an alternative is to use penalized regression or dimension reduction.</p></li>
</ul>
</section>
<section id="properties-of-the-estimator" class="slide level2">
<h2>Properties of the estimator</h2>
<div id="thm-OLS:adaptiv" class="theorem">
<p><span class="theorem-title"><strong>Theorem 3 (Adaptive Inference)</strong></span> Under regularity conditions and if <span class="math inline">\(p/n \approx 0\)</span>, the estimation error in <span class="math inline">\(\check D_i\)</span> and <span class="math inline">\(\check Y_i\)</span> has no first order effect on the stochastic behavior of <span class="math inline">\(\hat \beta_1\)</span>, namely <span class="math display">\[
\sqrt{n}(\hat \beta_1 - \beta_1) \approx  \sqrt{n} \mathbb{E}_n[\widetilde D\varepsilon]/ \mathbb{E}_n[\widetilde D^2]
\]</span> and consequently, <span class="math display">\[
\sqrt{n}(\hat \beta_1 - \beta_1) \overset{{\mathrm{D}}}{\rightarrow}  N(0,  V)
\]</span> where <span class="math display">\[
V = (\mathbb{E}[\widetilde D^2])^{-1}  \mathbb{E}[(\widetilde D^2 \varepsilon^2 )]  (\mathbb{E}[\widetilde D^2])^{-1}.
\]</span></p>
</div>
</section>
<section id="statistical-inference" class="slide level2">
<h2>Statistical Inference</h2>
<ul>
<li><p>For example, the <span class="math inline">\(95\%\)</span> confidence interval is given by <span class="math display">\[
[l,u]:=[\hat \beta_1 - 1.96 \sqrt{\hat V/n}, \hat \beta_1 +  1.96 \sqrt{\hat V/n}].
\]</span> where <span class="math inline">\(\hat{V}\approx V\)</span> is an estimator for the unknown variance of the distribution.</p></li>
<li><p>This set covers the population coefficient <span class="math inline">\(\beta_1\)</span> for most realizations of the sample. More precisely, a <span class="math inline">\((1-\alpha)\%\)</span> confidence interval contains <span class="math inline">\(\beta_1\)</span> in approximately <span class="math inline">\((1 - \alpha)\%\)</span> of the realizations of the sample: <span class="math display">\[
\Pr ( \beta_1 \in [l, u] ) \approx 1- \alpha.
\]</span></p></li>
</ul>
</section>
<section id="application-wage-equation" class="slide level2">
<h2>Application: Wage Equation</h2>
<ul>
<li><p>In labor economics an important question is what determines the wage of workers. Interest in this question goes back to the work of Jacob Mincer (see <span class="citation" data-cites="lemieux2006mincer">Lemieux (<a href="#/bibliography" role="doc-biblioref" onclick="">2006</a>)</span>).</p></li>
<li><p>While determining the inputs that lead to a worker’s wage is a causal question, we can begin to investigate it from a predictive perspective. We aim to answer two main questions:</p></li>
</ul>
<ol type="1">
<li><p>The Prediction Question: How can we use job-relevant characteristics, such as education and experience, to best predict wages?</p></li>
<li><p>The Predictive Effect or Association Question: What is the difference in predicted wages between men and women with the same job-relevant characteristics?<sup>1</sup></p></li>
</ol>
<aside><ol class="aside-footnotes"><li id="fn1"><p>We here use the binary distinction between men and women only because it is reported as a binary variable in the U.S. Current Population Survey.</p></li></ol></aside></section>
<section id="data-cps-2015" class="slide level2">
<h2>Data (CPS 2015)</h2>
<ul>
<li>We illustrate using data from the 2015 March Supplement of the U.S. Current Population Survey.</li>
<li>As outcome, <span class="math inline">\(Y\)</span>, we use the log hourly wage, and we let <span class="math inline">\(X\)</span> denote various characteristics of workers.<br>
</li>
<li>We focus on the (sub) sample of single (never married) workers, which is of size <span class="math inline">\(n \approx 5,000\)</span></li>
</ul>
</section>
<section id="empirical-analysis" class="slide level2">
<h2>Empirical Analysis</h2>
<ul>
<li><p>We will estimate a linear predictive (regression) model for log hourly wage using job-relevant characteristics <span class="math display">\[Y = \beta'X+ \varepsilon, \quad \varepsilon \perp X.\]</span></p></li>
<li><p>Then we assess the quality of the empirical prediction rule <span class="math inline">\(\hat\beta'X\)</span> using out-of-sample prediction performance, and analyze if there is a difference in pay for men and women (<em>gender wage gap</em>).</p></li>
<li><p>The gender wage gap may partly reflect discrimination against women in the labor market (we will discuss this question in more detail later).</p></li>
</ul>
</section>
<section id="models" class="slide level2">
<h2>Models</h2>
<p>We employ two different specifications for prediction:</p>
<ol type="1">
<li><p>In the <em>Basic Model</em> <span class="math inline">\(X\)</span> consists of a set of raw regressors (e.g.&nbsp;gender, experience, education indicators, occupation and industry indicators, and regional indicators), for a total of <span class="math inline">\(p=51\)</span> regressors. Our basic specification is known in labor economics as the Mincer equation, and is derived from a theoretical economic analysis; see, e.g., <span class="citation" data-cites="lemieux2006mincer">Lemieux (<a href="#/bibliography" role="doc-biblioref" onclick="">2006</a>)</span> for a review.</p></li>
<li><p>In the <em>Flexible Model</em>, <span class="math inline">\(X\)</span> consists of all raw regressors from the basic model as well as <em>technical regressors</em>, which are transformations of the raw regressors, namely, polynomials in experience <span class="math inline">\({exp}^2\)</span> and <span class="math inline">\({exp}^3\)</span> and additional two-way interactions of polynomials in experience with all other raw regressors. An example of a regressor created through a two-way interaction is experience times the indicator of having a college degree. In total we have <span class="math inline">\(p=246\)</span> technical regressors.</p></li>
</ol>
</section>
<section id="results-prediction" class="slide level2">
<h2>Results (Prediction)</h2>
<ul>
<li>The following table shows the measures of performance.</li>
</ul>
<table class="caption-top" style="width:100%;">
<colgroup>
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
<col style="width: 16%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>p</th>
<th><span class="math inline">\(R^2_{sample}\)</span></th>
<th><span class="math inline">\(MSE_{sample}\)</span></th>
<th><span class="math inline">\(R^2_{test}\)</span></th>
<th><span class="math inline">\(MSE_{test}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>basic reg</td>
<td>51</td>
<td>0,31</td>
<td>0,22</td>
<td>0,252</td>
<td>0,245</td>
</tr>
<tr class="even">
<td>flexible reg</td>
<td>246</td>
<td>0,35</td>
<td>0,21</td>
<td>0,184</td>
<td>0,267</td>
</tr>
</tbody>
</table>
<ul>
<li><p>The flexible regression model performs slightly better than the basic model on the sample used for training.</p></li>
<li><p>It appears that the basic regression model works slightly better than the flexible regression at predicting log wages for new observations.</p></li>
<li><p>That is, we see that the test (out-of-sample) <span class="math inline">\(MSE\)</span> and <span class="math inline">\(R^2\)</span> for the basic regression model are respectively slightly lower and higher than those of the flexible regression model, indicating slightly superior out-of-sample predictive performance.</p></li>
<li><p>We will replicate this empirical analysis in the <a href="https://colab.research.google.com/drive/1lvEb65tY0d0X_IngFwO2YxJwTciJvXAF">tutorial</a>.</p></li>
</ul>
</section>
<section id="gender-pay-gap" class="slide level2">
<h2>Gender Pay Gap</h2>
<ul>
<li><p>An important question is whether there is a difference in (predicted) wages between men and women with the same job-relevant characteristics. To answer this question, we estimate the log-linear regression model: <span class="math display">\[
Y = \beta_1 D  + \beta_2' W + \varepsilon,
\]</span> where <span class="math inline">\(Y\)</span> is log-wage, <span class="math inline">\(D\)</span> is the indicator of being female (<span class="math inline">\(1\)</span> if female and <span class="math inline">\(0\)</span> otherwise) and the <span class="math inline">\(W\)</span>’s are other determinants of wages: <span class="math inline">\(W\)</span> includes education, polynomials in experience, region, and occupation and industry indicators plus all two-way interactions of polynomial in experience with region, occupation, and industry indicators.</p></li>
<li><p>As we have log-transformed wages, we are analyzing the relative difference in pay for men and women. <sup>1</sup></p></li>
</ul>
<aside><ol class="aside-footnotes"><li id="fn2"><p>This interpretation relies on the approximation <span class="math inline">\(log(a)- log(b) \approx (a-b)/b\)</span>, which is accurate whenever <span class="math inline">\((a-b)/b\)</span> is small and <span class="math inline">\(b&gt;0\)</span>.</p></li></ol></aside></section>
<section id="results-inference" class="slide level2">
<h2>Results (Inference)</h2>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>Estimate</th>
<th>Std. Error</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>reg without covariates</td>
<td>-0.038</td>
<td>0.0159</td>
</tr>
<tr class="even">
<td>reg with covariates</td>
<td>-0.070</td>
<td>0.0156</td>
</tr>
<tr class="odd">
<td>partialling-out with covariates</td>
<td>-0.070</td>
<td>0.0156</td>
</tr>
</tbody>
</table>
<ul>
<li><p>We see that the unconditional wage gap of size <span class="math inline">\(3.8\)</span>% for women increases to about <span class="math inline">\(7\)</span>% after controlling for worker characteristics. This means we would predict a woman’s wage to be about <span class="math inline">\(7\)</span>% less per hour on average than the wage of a man who had the same experience, education, geographical region and occupation.</p></li>
<li><p>We will have a closer look at this empirical analysis in the tutorial. You can find the notebook <a href="https://drive.google.com/file/d/1CcrhU86lnx_zRkaj-4a_VdD4lpB3kfji/view?usp=sharing">here</a>.</p></li>
</ul>
</section>
<section id="bibliography" class="slide level2 smaller scrollable">
<h2>Bibliography</h2>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>CML</p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-frisch1933partial" class="csl-entry" role="listitem">
Frisch, Ragnar, and Frederick V Waugh. 1933. <span>“Partial Time Regressions as Compared with Individual Trends.”</span> <em>Econometrica: Journal of the Econometric Society</em>, 387–401.
</div>
<div id="ref-lemieux2006mincer" class="csl-entry" role="listitem">
Lemieux, Thomas. 2006. <span>“The <span>‘Mincer Equation’</span> Thirty Years After Schooling, Experience, and Earnings.”</span> In <em>Jacob Mincer a Pioneer of Modern Labor Economics</em>, 127–45. Springer.
</div>
<div id="ref-lovell1963seasonal" class="csl-entry" role="listitem">
Lovell, Michael C. 1963. <span>“Seasonal Adjustment of Economic Time Series and Multiple Regression Analysis.”</span> <em>Journal of the American Statistical Association</em> 58 (304): 993–1010.
</div>
<div id="ref-lovell2008simple" class="csl-entry" role="listitem">
———. 2008. <span>“A Simple Proof of the FWL Theorem.”</span> <em>The Journal of Economic Education</em> 39 (1): 88–91.
</div>
</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="L1_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="L1_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="L1_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="L1_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="L1_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="L1_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="L1_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="L1_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="L1_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="L1_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="L1_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5,"theme":"chalkboard"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>