<!DOCTYPE html>
<html lang="en"><head>
<script src="L2_files/libs/clipboard/clipboard.min.js"></script>
<script src="L2_files/libs/quarto-html/tabby.min.js"></script>
<script src="L2_files/libs/quarto-html/popper.min.js"></script>
<script src="L2_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="L2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="L2_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="L2_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="L2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <title>Lecture 2</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="L2_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="L2_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="L2_files/libs/revealjs/dist/theme/quarto.css">
  <link href="L2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="L2_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="L2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="L2_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="L2_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="L2_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 2</h1>
  <p class="subtitle">HHU summer term 2025 <br> April 30, 2025 <br> Prof.&nbsp;Dr.&nbsp;Jannis K√ºck</p>

<div class="quarto-title-authors">
</div>

</section>
<section>
<section id="causal-inference-via-randomized-experiments" class="title-slide slide level1 center">
<h1>Causal Inference via Randomized Experiments</h1>

</section>
<section id="potential-outcomes-framework" class="slide level2">
<h2>Potential Outcomes Framework</h2>
<ul>
<li><p>In this lecture, we discuss the potential outcomes framework for analyzing causality and treatment effects.</p></li>
<li><p>It offers a simple way to formalize causality as a mathematical concept.</p></li>
<li><p>Consider the two <em>latent</em> (unobserved) variables <span class="math display">\[Y(1) \text{ and  } Y(0).\]</span> They represent the potential or counterfactual random outcomes for an observational unit when the unit is subject to treatment (treatment state <span class="math inline">\(d=1\)</span>) or no treatment (control or untreated state <span class="math inline">\(d=0\)</span>), see <span class="citation" data-cites="rubin74">Rubin (<a href="#/bibliography" role="doc-biblioref" onclick="">1974</a>)</span>.</p></li>
<li><p>In an economic context, the treatment might be a training program or a policy intervention.</p></li>
</ul>
</section>
<section id="counterfactuals" class="slide level2">
<h2>Counterfactuals</h2>
<ul>
<li><p>It is also useful to introduce the potential response or structural function: <span class="math display">\[
d \mapsto Y(d),
\]</span> which maps the potential treatment state <span class="math inline">\(d \in \{0,1\}\)</span> to the random potential outcome <span class="math inline">\(Y(d)\)</span>.</p></li>
<li><p>The potential outcome <span class="math inline">\(Y(d) (\omega)\)</span> depends on the underlying state of the world <span class="math inline">\(\omega\)</span>. In our formalization, <span class="math inline">\(\omega\)</span> will represent randomness across observational units and from any other sources.</p></li>
<li><p>The quantities <span class="math inline">\(Y(1)\)</span> and <span class="math inline">\(Y(0)\)</span> are ‚Äúcounterfactual‚Äù because they can‚Äôt be simultaneously observed. That is, we generally do not have identical replicas of the observational units that are simultaneously subject to both treatment and control.</p></li>
<li><p>This is also called the <em>fundamental problem</em> of causal inference.</p></li>
</ul>
</section>
<section id="treatment-effects" class="slide level2">
<h2>Treatment Effects</h2>
<ul>
<li><p>The <strong>individual treatment effect</strong> is <span class="math display">\[
Y(1) - Y(0).
\]</span></p></li>
<li><p>This effect will vary across individuals as well as with other sources of randomness encoded in <span class="math inline">\(\omega\)</span>.</p></li>
<li><p>It is generally unrealistic to uncover the individual treatment effect.</p></li>
<li><p>Nevertheless, we can hope to estimate averages and the distribution of <span class="math inline">\(Y(d)\)</span> at the population level to compute quantities such as the <strong>average treatment effect (ATE)</strong>:</p></li>
</ul>
<!-- [^1]: Unless, say, we had identical twins that can be put in treatment and control groups, and the only difference in outcomes between them is induced by treatment, i.e. $\omega$ only depends on genetic makeup -->
<p><span class="math display">\[
    \delta= \mathbb{E} [Y(1) -  Y(0)] = \mathbb{E}[Y(1)] - \mathbb{E}[Y(0)].
    \]</span></p>
</section>
<section id="consistency" class="slide level2">
<h2>Consistency</h2>
<ul>
<li><p>A commonly used assumption in causal inference is <strong>consistency</strong>: <span class="math display">\[
Y:=Y(D).
\]</span></p></li>
<li><p>The assumption make sure that the observed outcome is equal to ùëå(1) after completion of a training program for a given person if she has completed the program (has ùê∑ = 1), and is equal to ùëå(0) if this person has not completed the training program (has ùê∑ = 0).</p></li>
</ul>
</section>
<section id="average-predictive-effect" class="slide level2">
<h2>Average Predictive Effect</h2>
<div id="exm-ATE" class="theorem example">
<p><span class="theorem-title"><strong>Example 1</strong></span> &nbsp;</p>
<ul>
<li>Consider the following model:</li>
</ul>
<p><span class="math display">\[
\begin{aligned}
Y(1) &amp;:=  \theta_1 + \epsilon_1 \\
Y(0) &amp;:= \theta_0 + \epsilon_0 \\
D &amp;:= 1(U&gt;0)
\\ Y &amp;:= Y(D),
\end{aligned}
\]</span></p>
<p>where <span class="math inline">\(\theta_0\)</span> and <span class="math inline">\(\theta_1\)</span> are constants, and <span class="math inline">\((\epsilon_0, \epsilon_1, U)\)</span> are jointly normal random stochastic disturbances with mean 0 and covariance matrix <span class="math inline">\(\Sigma\)</span>.</p>
<ul>
<li>In this example <span class="math inline">\(\mathbb{E}[Y(1)] = \theta_1\)</span>, <span class="math inline">\(\mathbb{E}[Y(0)] = \theta_0\)</span>, and the average treatment effect (ATE) is <span class="math display">\[\delta = \theta_1 - \theta_0.\]</span></li>
</ul>
</div>
</section>
<section class="slide level2">

<ul>
<li><p>If <strong>consistency</strong> holds, we can identify the following <strong>conditional averages</strong>: <span class="math display">\[
\mathbb{E} [Y \mid  D= d] = \mathbb{E}[Y(d) \mid D=d], \text{ for } d \in \{0,1\},
\]</span> directly from the population data.</p></li>
<li><p>The difference of the two averages gives us the <strong>average predictive effect</strong> (APE) of treatment status on the outcome: <span class="math display">\[
\pi = \mathbb{E} [Y \mid D=1] - \mathbb{E}[Y \mid D=0].
\]</span></p>
<p>It measures the association of the treatment status with the outcome.</p></li>
<li><p>While APE is identified ‚Äì meaning computable from the population data ‚Äì it may seem surprising (or not at all) that APE in general does not agree with the average predictive effect (ATE) <span class="math inline">\(\delta\)</span>: <span class="math display">\[
\delta \neq  \pi.
\]</span></p></li>
</ul>
</section>
<section id="selection-bias" class="slide level2">
<h2>Selection Bias</h2>
<ul>
<li>The difference between the APE and ATE is generally said to be due to <em>selection bias</em>.</li>
</ul>
<div id="exm-selectionbias" class="theorem example">
<p><span class="theorem-title"><strong>Example 2</strong></span> &nbsp;</p>
<ul>
<li><p>Suppose we want to study the impact of smoking marijuana on life longevity.</p></li>
<li><p>Assume that smoking marijuana has no causal effect on life longevity: <span class="math display">\[
Y = Y(0) = Y(1), \text{so that}\ \delta  = \mathbb{E}[Y(1) - Y(0)] =0.
\]</span></p></li>
<li><p>However, the observed smoking behavior, <span class="math inline">\(D\)</span>, is not assigned in an experimental study.</p></li>
<li><p>The behavior is merely observed, and can be associated with poor health choices such as drinking alcohol, which are known to cause shorter life expectancy.</p></li>
<li><p>In this case <span class="math display">\[\pi =  \mathbb{E} [Y \mid D =1] - \mathbb{E} [Y \mid D=0 ]&lt; 0 = \delta. \]</span></p></li>
</ul>
</div>
</section>
<section class="slide level2">

<ul>
<li><p>To sum up, in the smoking example, the observed ‚Äútreatment‚Äù variable is potentially negatively associated with the potential health outcome, inducing the inequality <span class="math inline">\(\mathbb{E}[Y(d) | D=1] &lt; \mathbb{E}[ Y(d)]\)</span>.</p></li>
<li><p>It is useful to emphasize the main reason for having selection bias is that <span class="math display">\[
\mathbb{E}[Y(d) | D=1] \neq \mathbb{E}[ Y(d)]
\]</span> whenever <span class="math inline">\(D\)</span> is not independent of <span class="math inline">\(Y(d)\)</span>. If <span class="math inline">\(D\)</span> and <span class="math inline">\(Y(d)\)</span> were independent, <span class="math display">\[
\mathbb{E}[Y(d) | D=1] = \mathbb{E}[ Y(d)]
\]</span> would hold since in this case <span class="math inline">\(D\)</span> is uninformative about the potential outcome and drops out from the conditional expectation.</p></li>
<li><p>The problem with observational studies like our contrived <a href="#/selection-bias" class="quarto-xref">Example&nbsp;2</a> is that the ‚Äútreatment‚Äù variable <span class="math inline">\(D\)</span> is determined by individual behaviors which may be linked to potential outcomes. This linkage generates selection bias - the disagreement between APE and ATE.</p></li>
</ul>
</section>
<section id="randomized-control-trials" class="slide level2">
<h2>Randomized Control Trials</h2>
<ul>
<li>The cleanest way to remove selection bias is through <strong>random assignment</strong> of treatment which leads to randomized control trials (RCT).</li>
</ul>
<!-- ^[Synonyms are experiments and A/B tests.] -->
<ul>
<li><p><strong>Assumption</strong> (Random Assignment/Exogeneity): The treatment status is randomly assigned, namely <span class="math inline">\(D\)</span> is statistically independent of each potential outcomes <span class="math inline">\(Y(d)\)</span> for <span class="math inline">\(d \in \{0,1\}\)</span>, which is denoted as <span class="math display">\[
D  \perp \!\!\! \perp Y(d)\]</span> and <span class="math inline">\(0&lt;\Pr(D=1)&lt;1\)</span>.</p></li>
<li><p>This assumption states that the treatment assignment mechanism is purely random, and ensures that there are units in treatment and in control.</p></li>
<li><p>Does this hold in <a href="#/average-predictive-effect" class="quarto-xref">Example&nbsp;1</a>?</p></li>
</ul>
</section>
<section class="slide level2">

<div id="thm-ra" class="theorem">
<p><span class="theorem-title"><strong>Theorem 1 (Randomization Removes Selection Bias])</strong></span> Under random assignment, the average outcome in treatment group <span class="math inline">\(d\)</span> recovers the average potential outcome under the treatment status <span class="math inline">\(d\)</span>: <span class="math display">\[
\mathbb{E} [Y \mid D=d] = \mathbb{E}[Y(d) \mid D=d] = \mathbb{E}[Y(d)],\]</span> for each <span class="math inline">\(d \in \{0,1\}\)</span>.</p>
<ul>
<li>Hence the average predictive effect and average treatment effects coincide:</li>
</ul>
<p><span class="math display">\[
    \begin{eqnarray*}
    \pi &amp; := &amp; \mathbb{E} [Y \mid D=1] -  \mathbb{E} [Y \mid D=0] \\
    &amp; = &amp; \mathbb{E}[Y(1)] - \mathbb{E}[Y(0)] =: \delta.
    \end{eqnarray*}
\]</span></p>
<ul>
<li><p>Because of this property, RCTs are considered golden standard in causal inference, and are routinely employed in a variety of important settings.</p></li>
<li><p>Examples include evaluating the efficacy of medical treatment, vaccinations, training programs, marketing campaigns, and other kinds of interventions.</p></li>
</ul>
</div>
</section>
<section id="statistical-inference" class="slide level2">
<h2>Statistical Inference</h2>
<ul>
<li><p>Inference is based on the independent sample <span class="math inline">\((Y_i, D_i)_{i=1}^n\)</span> obtained from the experiment, where index <span class="math inline">\(i\)</span> denotes the observational unit.</p></li>
<li><p>Estimation of two (conditional) means <span class="math inline">\(\theta_d = \mathbb{E} [Y \mid D=d]\)</span> for <span class="math inline">\(d=0\)</span> and <span class="math inline">\(d=1\)</span>, can be done via linear regression or, equivalently, by considering two group means <span class="math display">\[
\hat{\theta}_d = \frac{\mathbb{E}_n [Y 1(D=d)]}{ \mathbb{E}_n [1(D=d)]}.
\]</span></p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Under mild regularity conditions, we have that <span class="math inline">\(\hat{\delta} = \hat{\theta}_1 - \hat{\theta}_0\)</span> obeys <!-- $$ --> <!-- \sqrt{n} \{\hat \theta_d - \theta_d \}_{d \in \{0,1\}} \overset{{\mathrm{D}}}{\rightarrow} N(0, V), --> <!-- $$ --> <!-- where --> <!-- $$ --> <!-- V =  --> <!-- \left( --> <!-- \begin{array}{cc} --> <!--  \frac{Var ( Y1 (D=0))}{P(D=0)}   &   0   \\ --> <!--  0 &       \frac{Var (Y 1(D=1))}{P(D=1)}  --> <!-- \end{array} --> <!-- \right) --> <!-- $$ --> <!-- so that $\hat \delta = \hat \theta_1 - \hat \theta_0$ obeys --> <span class="math display">\[
\sqrt{n} (\hat{\delta} - \delta) \overset{{\mathrm{D}}}{\rightarrow} N(0, V_{11} + V_{22} ),
\]</span> where <span class="math display">\[
V =
\left(
\begin{array}{cc}
\frac{Var ( Y1 (D=0))}{P(D=0)}   &amp;   0   \\
0 &amp;       \frac{Var (Y 1(D=1))}{P(D=1)}
\end{array}
\right).
\]</span></li>
</ul>
</section>
<section id="example-pfizerbiontech-covid-vaccine-rct" class="slide level2">
<h2>Example: Pfizer/BioNTech Covid Vaccine RCT</h2>
<ul>
<li><p>Pfizer/BNTX was the first vaccine approved for emergency use in the EU and US to reduce the risk of Covid-19 disease.</p></li>
<li><p>See the Food and Drug Administration (FDA) <a href="https://www.fda.gov/media/144245/download">briefing</a> for details about the RCT and the summary data.</p></li>
<li><p>Volunteers were randomly assigned to receive either a treatment (2-dose vaccination) or a placebo, without knowing which they received, and the doctors making the diagnoses did not know whether a given volunteer received a vaccination or not.</p></li>
<li><p>In other words, the trial was a double-blind randomized control trial.</p></li>
<li><p>This <a href="https://drive.google.com/file/d/1JH8fHKvlDcwUZ76iBO6mue4sJb0ixKmg/view?usp=sharing">notebook</a> contains the analysis of the Pfizer-BioNTech Covid-19 Vaccine and Polio Vaccine RCTs.</p></li>
</ul>
</section>
<section id="results" class="slide level2">
<h2>Results</h2>

<img data-src="images/PfizerRCT.jpg" class="r-stretch quarto-figure-center"><p class="caption">
Figure&nbsp;1: The aggregate data from the Pfizer RCT, source: FDA
</p></section>
<section class="slide level2">

<ul>
<li><p>The trial had to be large, because the rate of Covid-19 infection was relatively low at the time.</p></li>
<li><p>Specifically, the treatment group saw 9 Covid-19 cases per 19,965, while the control group saw 169 cases per 20,172.</p></li>
<li><p>The estimated average treatment effect is about <span class="math display">\[
-792.7
\]</span> cases per 100,000, and the 95% confidence band is <span class="math inline">\([-922, -664]\)</span>.</p></li>
</ul>
</section>
<section id="statistical-inference-1" class="slide level2">
<h2>Statistical Inference</h2>
<ul>
<li><p>Sometimes we also have additional pre-treatment or pre-determined covariates <span class="math inline">\(W\)</span>.</p></li>
<li><p>We might be interested in either using these covariates to estimate average treatment effects more precisely or to describe heterogeneity of the treatment effects.</p></li>
<li><p>For example, we might be interested in the impact of a treatment across age or income groups.</p></li>
</ul>
</section>
<section id="regression-and-statistical-inference-for-ates" class="slide level2">
<h2>Regression and Statistical Inference for ATEs</h2>
<ul>
<li><p>Here we make the strong linear assumption on the conditional expectation function <span id="eq-linoutcomes"><span class="math display">\[
\mathbb{E}[Y \mid D,W] = D \alpha + X'\beta,
\qquad(1)\]</span></span> where <span class="math inline">\(X = (1, W)\)</span> contains an intercept and pre-treatment covariates <span class="math inline">\(W\)</span>. This is clearly restrictive, but we will relax this below and makes things fully nonlinear later. The inferential result will be valid without this assumption.</p></li>
<li><p>Using centered covariates implies that <span class="math display">\[\mathbb{E}[Y (0)] = \mathbb{E}[\mathbb{E}[ Y \mid D=0, X]] = \beta_1\]</span> and <span class="math display">\[\mathbb{E}[Y(1)] =
\mathbb{E} \mathbb{E}[[ Y \mid D=1,X]]  = \beta_1 + \alpha.\]</span></p></li>
<li><p>The average outcome in the untreated state is <span class="math inline">\(\beta_1\)</span>, and the average treatment effect is <span class="math inline">\(\alpha\)</span>.</p></li>
</ul>
</section>
<section id="estimator" class="slide level2">
<h2>Estimator</h2>
<ul>
<li><p><a href="#/regression-and-statistical-inference-for-ates" class="quarto-xref">Equation&nbsp;1</a> implies that <span class="math display">\[
Y = D \alpha + X'\beta+ \epsilon, \quad \epsilon \perp (D,X)
\]</span> implying that <span class="math inline">\(\alpha\)</span> coincides with the BLP coefficient in the BLP of <span class="math inline">\(Y\)</span> on <span class="math inline">\(D\)</span> and <span class="math inline">\(X\)</span>.</p></li>
<li><p>Application of the OLS theory in the previous chapter gives us under regularity conditions: <span class="math display">\[
\sqrt{n}(\hat{\alpha} - \alpha)
\overset{{\mathrm{D}}}{\rightarrow} N (0, V_{11}),
\]</span> with <span class="math inline">\(V_{11} = \frac{\mathbb{E} [\epsilon^2 \tilde D^2]}{(\mathbb{E}[\tilde D^2])^2}\)</span> where <span class="math inline">\(\tilde D= D - \mathbb{E}[D]\)</span> is the residual after partialling out linearly <span class="math inline">\(X\)</span> from <span class="math inline">\(D\)</span>.</p></li>
</ul>
</section>
<section id="the-role-of-covariates" class="slide level2">
<h2>The Role of Covariates</h2>
<ul>
<li><p>One role of covariates in randomized experiments is ‚Äúdenoising‚Äù or improving the precision of estimation of quantities like the ATE. Without covariates, the OLS estimator <span class="math inline">\(\bar \alpha\)</span> estimates the projection coefficient <span class="math inline">\(\alpha\)</span> in the model: <span class="math display">\[
Y = \alpha D + \beta_1 + U,
\]</span> with <span class="math inline">\(\mathbb{E}[U(1,D)']=0\)</span>.</p></li>
<li><p>The noise <span class="math inline">\(U = X'\beta + \epsilon\)</span> contains the ‚Äúexplainable‚Äù component <span class="math inline">\(X'\beta\)</span> if we were to include covariates.</p></li>
<li><p>We then have that <span class="math inline">\(\bar \alpha\)</span> obeys <span class="math display">\[
\sqrt{n}(\bar \alpha - \alpha)  \overset{{\mathrm{D}}}{\rightarrow} N (0, \bar V_{11}) \ \text{with}\
\bar V_{11} = \frac{\mathbb{E} [U^2 \tilde{D}^2]}{(\mathbb{E}[\tilde{D}^2] )^2}.
\]</span></p></li>
<li><p>Under our assumptions, it follows that <span class="math inline">\(V_{11} &lt; \bar V_{11}\)</span> if <span class="math inline">\(Var [X'\beta] &gt;0\)</span>.</p></li>
</ul>
</section>
<section id="robust-standard-errors" class="slide level2">
<h2>Robust Standard Errors</h2>
<ul>
<li><p>That is, pre-determined covariates improve the precision of estimating the ATE <span class="math inline">\(\alpha\)</span>.</p></li>
<li><p>While the inferential result we derived is robust with respect to the linearity assumption on CEF (conditional expectation function), the improvement in precision itself is <strong>not</strong> guaranteed in general and hinges on the validity of the linearity assumption for the CEF.</p></li>
<li><p>The following <a href="https://www.kaggle.com/victorchernozhukov/r-notebook-analyzing-rct-with-precision">notebook</a> constructs an example where controlling for predetermined covariates linearly lowers the precision (increases robust standard errors).</p></li>
</ul>
</section>
<section id="treatment-effect-heterogeneity" class="slide level2">
<h2>Treatment Effect Heterogeneity</h2>
<ul>
<li><p>Next, we use covariates to describe heterogeneity of the treatment effects. For this purpose, we consider conditional average treatment effects (CATE): <span class="math display">\[
\delta(W) = \mathbb{E}[Y(1) \mid W] - \mathbb{E}[Y(0)  \mid W],
\]</span> which compare the average potential outcomes conditional on a set of covariates <span class="math inline">\(W\)</span>.</p></li>
<li><p>We can use RCTs to identify conditional average treatment effects by estimating the conditional predictive effects (CPE): <span class="math display">\[
\pi(W) = \mathbb{E}[Y \mid D=1, W] - \mathbb{E}[Y \mid D=0, W].
\]</span></p></li>
<li><p><strong>Random Assignment Independent of Covariates</strong>: Suppose that treatment status is randomly assigned, namely <span class="math inline">\(D\)</span> is statistically independent of both the potential outcomes and a set of pre-determined covariates:<span class="math display">\[
D \perp \!\!\! \perp (Y(d),W).
\]</span> <!-- and $0<\Pr(D=1)<1$. --></p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>This assumption spells out that, if we plan to use covariates in the analysis, randomization has to be made with respect to these covariates as well.</p></li>
<li><p>In practice, it is often tempting to use post-treatment covariates, but the use of such variables runs the danger of violating random assignment independent of covariates.</p></li>
<li><p>A common scenario where this may occur is when researchers encounter missing data from imperfect data collection in following-up with control and treated units to collect demographic information. When we drop observations with missing data, we implicitly condition on a post-treatment variable (missingness) which can cause violations of this assumption.</p></li>
<li><p>The desire to assess randomization with respect to covariates motivates the following diagnostic procedure‚Ä¶</p></li>
</ul>
</section>
<section id="testing-covariate-balance" class="slide level2">
<h2>Testing Covariate Balance</h2>
<ul>
<li><p>The random assignment assumption induces covariate balance. Namely, the distribution of covariates should be the same under both treatment and control: <span class="math display">\[
W |D=1 \sim W |D=0,
\]</span> and, equivalently, <span class="math inline">\(D |W \sim D\)</span>.</p></li>
<li><p>A useful implication is that <span class="math inline">\(\mathbb{E} [W | D=1] = \mathbb{E}[W |D=0]\)</span>. That is, <span class="math inline">\(D\)</span> does not predict any covariate feature; and moreover, <span class="math inline">\(D\)</span> is not predictable by <span class="math inline">\(W\)</span>: <span class="math display">\[
\mathbb{E}[D \mid W] =\mathbb{E}[D].
\]</span></p></li>
<li><p>These latter conditions are easily testable using regression tools.</p></li>
</ul>
</section>
<section class="slide level2">

<div id="thm-rac" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2 (Randomization with Covariates)</strong></span> Under <em>Random Assignment Independent of Covariates</em>, the expected value of <span class="math inline">\(Y\)</span> conditional on treatment status <span class="math inline">\(D=d\)</span> and covariates <span class="math inline">\(W\)</span> coincides with the expected value of potential outcome <span class="math inline">\(Y(d)\)</span> conditional on covariates <span class="math inline">\(W\)</span>: <span class="math display">\[
\mathbb{E}[Y \mid D=d,W] = \mathbb{E}[Y(d) \mid D=d,W] = \mathbb{E}[Y(d) |W],
\]</span> for each <span class="math inline">\(d\)</span>. Hence the conditional predictive and average treatment effects agree: <span class="math display">\[
\pi(W)= \delta(W).
\]</span></p>
</div>
</section>
<section id="discover-heterogeneity-through-cate" class="slide level2">
<h2>Discover Heterogeneity through CATE</h2>
<ul>
<li>We can consider estimation of CATE through the lens of linear regression by use of an <em>interactive</em> model: <span class="math display">\[
\begin{equation}
\mathbb{E}(Y \mid D,W) = D X'\alpha + X'\beta
\end{equation}
\]</span> with <span class="math display">\[
X = (1, W')', \quad \mathbb{E}[W] =0,
\]</span></li>
<li>Such a linear rule is called <em>interactive</em> because it includes the interaction (meaning, product) of <span class="math inline">\(D\)</span> and <span class="math inline">\(W\)</span> as a regressor, in addition to <span class="math inline">\(D\)</span> and <span class="math inline">\(W\)</span>. Here, we recover CATE via <span class="math display">\[
\begin{align*}
\delta(W) &amp;= \mathbb{E}[Y(1) \mid W] - \mathbb{E}[Y(0) \mid W] =\\
&amp;\quad \ \mathbb{E}[Y \mid D=1, W] - \mathbb{E}[Y \mid D=0, W] = X'\alpha.
\end{align*}
\]</span></li>
<li>Using that <span class="math inline">\(\mathbb{E}[W] = 0\)</span>, the ATE is then <span class="math inline">\(\delta= \mathbb{E}[\delta(W)] = \mathbb{E}[X' \alpha ]= \alpha_1\)</span>, where <span class="math inline">\(\alpha_1\)</span> is the first component of <span class="math inline">\(\alpha\)</span>.</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>The function <span class="math inline">\(W'\alpha_2\)</span>, where <span class="math inline">\(\alpha_2\)</span> is the vector all elements of <span class="math inline">\(\alpha\)</span> excluding <span class="math inline">\(\alpha_1\)</span>, therefore describes the deviation of CATE away from the ATE.</p></li>
<li><p>We can verify that <span class="math inline">\(\alpha\)</span> is the coefficient of the linear projection equation: <span class="math display">\[
Y = \alpha'  DX + \beta' X + \epsilon, \ \ \epsilon \perp (X,DX).
\]</span></p></li>
<li><p>Therefore, we can treat <span class="math display">\[\bar D := DX\]</span> as a vector of technical treatments and invoke the ‚Äúpartialling out‚Äù approach for inference on components of <span class="math inline">\(\alpha\)</span>.</p></li>
<li><p>Unlike the previous approach for ATE estimation, the ‚Äúinteractive‚Äù approach always delivers improvements in precision of estimating <span class="math inline">\(\delta\)</span>, even if the linearity assumption does not hold; this was demonstrated by <span class="citation" data-cites="lin2013">Lin et al. (<a href="#/bibliography" role="doc-biblioref" onclick="">2013</a>)</span>.</p></li>
</ul>
</section>
<section id="reemployment-bonus-rct" class="slide level2">
<h2>Reemployment Bonus RCT</h2>
<ul>
<li><p>The <a href="https://drive.google.com/file/d/1oZWXhKgISYtGGhuyvcxhryXHGtkIXcuU/view?usp=sharing">notebook</a> explores the use of covariates to improve precision and learn about heterogeneity in a Reemployment Bonus RCT.</p></li>
<li><p>Here we re-analyze the Pennsylvania re-employment bonus experiment <span class="citation" data-cites="bilias">Bilias (<a href="#/bibliography" role="doc-biblioref" onclick="">2000</a>)</span>, which was conducted in the 1980s by the U.S. Department of Labor to test the incentive effects of alternative compensation schemes for unemployment insurance (UI).</p></li>
<li><p>In these experiments, UI claimants were randomly assigned either to a control group or one of five treatment groups. We focus our discussion on treatment group 4. In the control group the current rules of the UI applied.</p></li>
<li><p>Individuals in the treatment groups were offered a cash bonus if they found a job within some pre-specified period of time (qualification period), provided that the job was retained for a specified duration; see the <a href="http://qed.econ.queensu.ca/jae/2000-v15.6/bilias/readme.b.txt">Penn Data Codebook</a> for further details on the data.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>We consider the classical 2-sample approach, no adjustment (CL), the classical linear regression adjustment (CRA) and the interactive regression adjustment (IRA)</p></li>
<li><p>Estimates of the ATE (est) on (log) unemployment duration and corresponding estimated standard errors (se) are given in the following table:</p>
<table class="caption-top">
<thead>
<tr class="header">
<th></th>
<th>CL</th>
<th>CRA</th>
<th>IRA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>est</td>
<td>-0.08546</td>
<td>-0.07968</td>
<td>-0.07550</td>
</tr>
<tr class="even">
<td>se</td>
<td>0.03586</td>
<td>0.03559</td>
<td>0.03560</td>
</tr>
</tbody>
</table></li>
<li><p>We see that the treatment group experiences an average decrease of about <span class="math inline">\(7.8\%\)</span> in the duration of unemployment spells.</p></li>
<li><p>The two regression estimators deliver estimates that are slightly more precise (have lower standard errors) than the simple difference in two means estimator.</p></li>
<li><p>The regression estimators offer slightly lower estimates of the ATE. These differences likely occur due to <em>imbalances</em> in the treatment allocation.</p></li>
<li><p>Though not reported here, there is not any statistically detectable heterogeneity in effects from looking at the IRA results given in the R Notebook for this example.</p></li>
</ul>
</section>
<section id="the-limitations-of-rcts" class="slide level2">
<h2>The limitations of RCTs</h2>
<ul>
<li><p>The traditional formulation of Rubin‚Äôs causal model relies on SUTVA. This assumption requires that the potential outcome observation of one unit should be unaffected by the assignment of treatments to other units, see <span class="citation" data-cites="cox1958">Cox (<a href="#/bibliography" role="doc-biblioref" onclick="">1958</a>)</span>.</p></li>
<li><p>We consider some cases where this assumption might not hold:</p></li>
</ul>
<ol type="1">
<li><p>In a vaccine example, this assumption holds if treatment and control populations are ‚Äúsmall‚Äù subpopulations of the entire general population. If we vaccinate a sufficiently large percentage of people, reaching herd immunity, the outcomes for the control group would be essentially the same as outcomes for the treated SUTVA therefore would not hold.</p></li>
<li><p>In economics we refer to such spillover effects as externalities, and in some contexts, we may call them general equilibrium effects. For example, there is a positive externality created by people who take the vaccine (and people that don‚Äôt take vaccine ‚Äúfree ride‚Äù, once the vaccination level is high enough).</p></li>
</ol>
</section>
<section class="slide level2">

<ol start="3" type="1">
<li>We might want to study the earning effect of getting a college degree versus not having a college degree. If treatment will target a relatively small subpopulation of people, there likely won‚Äôt be any large general equilibrium wage effects. On the other hand, if the treatment will target a large subpopulation, the equilibrium wage will likely adjust (the college wage premium might decrease, for example).</li>
</ol>
</section>
<section id="ethical-practical-and-generalizability-concerns" class="slide level2">
<h2>Ethical, Practical and Generalizability Concerns</h2>
<ul>
<li><p>Many RCTs are infeasible because implementing them would be unethical. The general ethical principles and guidelines for research involving human subjects are set out in the 1978 Belmont report <span class="citation" data-cites="Belmont:RCT"><span>‚ÄúThe Belmont Report: Ethical Principles and Guidelines for the Protection of Human Subjects of Research‚Äù</span> (<a href="#/bibliography" role="doc-biblioref" onclick="">1978</a>)</span>.</p></li>
<li><p>For example, we previously considered a hypothetical RCT where individuals are assigned to a smoking treatment group. The trial would violate the principle of ‚Äúbeneficence‚Äù as the researcher might be causing physical harm to study participants by assigning them to smoking.</p></li>
<li><p>Thus, RCTs are rarely a feasible means of retrieving the causal effects of harmful interventions as they tend to be unethical.</p></li>
<li><p>RCTs may also face practical issues. They can be prohibitively expensive where the treatment is costly, data collection costs are high or the sample size required for adequate power is high.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Even in the best case, where an RCT is successfully implemented and we are confident in our retrieved average treatment effect, it may be difficult to generalize (or extrapolate) the result of an RCT in a specific context to a general finding. This difficulty might be because local conditions or implementation capacity materially differ between where interventions are staged or because the scale of the intervention is important.</li>
</ul>
</section>
<section id="concluding-notes" class="slide level2">
<h2>Concluding Notes</h2>
<ul>
<li><p>RCTs have had a profound influence on business, economics and science more generally. For example, RCTs are routinely used to study the efficacy of drugs and efficacy of various programs in labor and development economics, among other subfields of economics.</p></li>
<li><p>The FDA moved to RCTs as the gold standard of proving that treatments work in 1970s-80s.</p></li>
<li><p>In the tech industry and marketing, RCTs are also called ‚ÄúA/B Testing‚Äù and are now widely used. Many major tech companies have their own experimental platforms to carry out thousands of experiments. See, for example, the <a href="https://www.microsoft.com/en-us/research/group/experimentation-platform-exp/">ExP platform at Microsoft</a> and the <a href="https://www.amazon.jobs/en/teams/aeo">WebLab platform</a> at Amazon.</p></li>
<li><p>The expansion of the use of experimentation in economics is associated with the work of Abhijit Banerjee, Esther Duflo, and Michael Kremer, the recipients of Alfred Nobel Memorial Prize in Economics for their experimental approach to alleviating global poverty, see <a href="https://www.nobelprize.org/prizes/economic-sciences/2019/summary/">here</a>.</p></li>
</ul>
</section>
<section id="bibliography" class="slide level2 smaller scrollable">
<h2>Bibliography</h2>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>CML</p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bilias" class="csl-entry" role="listitem">
Bilias, Yannis. 2000. <span>‚ÄúSequential Testing of Duration Data: The Case of the Pennsylvania <span>‚ÄòReemployment Bonus‚Äô</span> Experiment.‚Äù</span> <em>Journal of Applied Econometrics</em> 15 (6): 575‚Äì94.
</div>
<div id="ref-cox1958" class="csl-entry" role="listitem">
Cox, David R. 1958. <em>Planning of Experiments</em>. Wiley.
</div>
<div id="ref-lin2013" class="csl-entry" role="listitem">
Lin, Winston et al. 2013. <span>‚ÄúAgnostic Notes on Regression Adjustments to Experimental Data: Reexamining Freedman‚Äôs Critique.‚Äù</span> <em>Annals of Applied Statistics</em> 7 (1): 295‚Äì318.
</div>
<div id="ref-rubin74" class="csl-entry" role="listitem">
Rubin, Donald B. 1974. <span>‚ÄúEstimating Causal Effects of Treatments in Randomized and Nonrandomized Studies.‚Äù</span> <em>Journal of Educational Psychology</em> 66 (5): 688‚Äì701.
</div>
<div id="ref-Belmont:RCT" class="csl-entry" role="listitem">
<span>‚ÄúThe Belmont Report: Ethical Principles and Guidelines for the Protection of Human Subjects of Research.‚Äù</span> 1978. National Commission for the Protection of Human Subjects of Biomedical; Behavioral Research.
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="L2_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="L2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="L2_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="L2_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="L2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="L2_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="L2_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="L2_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="L2_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="L2_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="L2_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5,"theme":"chalkboard"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>