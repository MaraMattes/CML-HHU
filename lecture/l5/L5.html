<!DOCTYPE html>
<html lang="en"><head>
<script src="L5_files/libs/clipboard/clipboard.min.js"></script>
<script src="L5_files/libs/quarto-html/tabby.min.js"></script>
<script src="L5_files/libs/quarto-html/popper.min.js"></script>
<script src="L5_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="L5_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="L5_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="L5_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="L5_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <title>Lecture 5</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="L5_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="L5_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="L5_files/libs/revealjs/dist/theme/quarto.css">
  <link href="L5_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="L5_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="L5_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="L5_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="L5_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="L5_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Lecture 5</h1>
  <p class="subtitle">HHU summer term 2025 <br> May 28, 2025 <br> Prof.&nbsp;Dr.&nbsp;Jannis Kück</p>

<div class="quarto-title-authors">
</div>

</section>
<section>
<section id="causal-inference-via-conditional-exogeneity" class="title-slide slide level1 center">
<h1>Causal Inference via Conditional Exogeneity</h1>

</section>
<section id="introduction" class="slide level2">
<h2>Introduction</h2>
<p><strong>“A fancy method alone is not a credible identification strategy”</strong></p>
<ul>
<li><p>Here we discuss how average causal effects may be identified using regression when treatment is not randomly assigned but instead depends on observed covariates.</p></li>
<li><p>We discuss the regression method, where we compute the average difference between expected outcomes for treated and untreated units that are comparable (formally, identical) in terms of their characteristics <span class="math inline">\(X\)</span>.</p></li>
<li><p>If treatment is as good as randomly assigned conditional on <span class="math inline">\(X\)</span>, then this approach recovers average causal or treatment effects.</p></li>
<li><p>This key condition is commonly referred to as conditional ignorability or <strong>conditional exogeneity</strong>.</p></li>
</ul>
</section>
<section id="example" class="slide level2">
<h2>Example</h2>
<ul>
<li>In a cross-country analysis, higher chocolate consumption predicts a higher number of Nobel laureates per capita.</li>
</ul>

<img data-src="images/Figure-Chocolate.png" class="r-stretch quarto-figure-center"><p class="caption">
Figure&nbsp;1: Source: Franz H. Messerli, “Chocolate Consumption, Cognitive Function, and Nobel Laureates”, New England Journal of Medicine. 2012
</p></section>
<section class="slide level2">

<ul>
<li><p>Is this a reflection of a true causal effect and therefore an actionable insight?</p></li>
<li><p>If it were, countries could generate more Nobel laureates per capita by making chocolate abundant to everyone. (This wouldn’t be a bad thing.)</p></li>
<li><p>Is this perhaps what Switzerland did? Switzerland has the highest number of Nobel laureates per capita.</p></li>
</ul>
</section>
<section id="common-causes" class="slide level2">
<h2>Common Causes</h2>
<ul>
<li><p>Or is there a common cause that creates non-causal association – perhaps wealthy countries invest more in science and higher wealth causes people to consume luxury goods like chocolate?</p></li>
<li><p>Comparative analysis, where we compare nations with identical or similar wealth, would probably reveal that the correlation is not causal.</p></li>
<li><p>Probably we should be comparing Switzerland to similar countries in terms of wealth – the “apples-to-apples” comparison, so to speak.</p></li>
<li><p>This type of analysis is very common in causal inference and is implemented via a set of tools introduced in this chapter.</p></li>
</ul>
</section>
<section class="slide level2">


<img data-src="chocolate3.png" style="width:200.0%" class="r-stretch quarto-figure-center"><p class="caption">A Contrived Causal Path Diagram for the Effect of Country’s Wealth on Chocolate Consumption and Nobel Prize Production per capita.</p></section>
<section class="slide level2">

<ul>
<li>In what follows, we work within Rubin’s potential outcomes framework(<span class="citation" data-cites="rubin74">Rubin (<a href="#/bibliography" role="doc-biblioref" onclick="">1974</a>)</span>), as introduced in Lecture 2. The idea is that if we can think of observed treatment <span class="math inline">\(D\)</span> as generated randomly – independently of potential outcomes – conditional on some pre-treatment variables <span class="math inline">\(X\)</span>, then we can learn the average causal (treatment) effects by regression <span class="math display">\[
\text{ of } \ Y  \text{ on } \  D\ \text{ and  } \  X,
\]</span> or, as is often said, by “controlling” for <span class="math inline">\(X\)</span>.</li>
</ul>
</section>
<section id="notation" class="slide level2">
<h2>Notation</h2>
<ul>
<li>Recall that we denote the independence of two random variables as <span class="math inline">\(\perp \!\!\! \perp\)</span></li>
</ul>
<p>Note that <span class="math inline">\(\perp\)</span> that is used to denote orthogonality (uncorrelatedness of a centered random variable with another)</p>
<ul>
<li><p>If <span class="math inline">\(U\)</span> is centered, then <span class="math inline">\(U\perp \!\!\! \perp V\)</span> implies <span class="math inline">\(U \perp V\)</span>, but the reverse implication is not true in general.</p></li>
<li><p>Independence, conditional on a third variable <span class="math inline">\(X\)</span>, is denoted by <span class="math display">\[
U \perp \!\!\! \perp V \mid X.
\]</span></p></li>
</ul>
</section>
<section id="identification-by-conditioning" class="slide level2">
<h2>Identification by Conditioning</h2>
<ul>
<li><p>Recall that we use <span class="math inline">\(Y(d)\)</span> to denote potential outcome in the treatment state <span class="math inline">\(d\)</span>.</p></li>
<li><p>Suppose we want to study the impact of smoking marijuana on life longevity.</p></li>
<li><p>Suppose that smoking marijuana has no causal/treatment effect on life longevity: <span class="math display">\[
Y = Y(0) = Y(1), \text{ so that } \delta  = \mathbb{E}[Y(1)] - \mathbb{E}[Y(0)] =0.
\]</span></p></li>
<li><p>However, the observed smoking behavior, <span class="math inline">\(D\)</span>, results not from an experimental study, but from observational data in which an individual’s smoking behavior is associated with poor health choices <span class="math inline">\(X\)</span> (drinking alcohol for example) which cause shorter life longevity.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>In this case, the predictive effect recovered by regression without adjusting for <span class="math inline">\(X\)</span> does not match the average causal effect <span class="math display">\[ \mathbb{E}[Y \mid D =1] - \mathbb{E}[Y \mid D=0 ]&lt; 0 = \delta, \]</span> because higher <span class="math inline">\(D\)</span> predicts higher <span class="math inline">\(X\)</span>, which predicts lower <span class="math inline">\(Y\)</span>.</p></li>
<li><p>This difference between the predictive effect and average causal effect is the result of confounding or <strong>selection bias</strong>.</p></li>
<li><p>In this example, conditioning on <span class="math inline">\(X\)</span> can remove the selection bias <span class="math display">\[
  \mathbb{E}[\mathbb{E}[Y \mid D =1,X] - \mathbb{E} [Y \mid D=0,X ]] = \delta
\]</span> provided that conditional on <span class="math inline">\(X\)</span> variation in <span class="math inline">\(D\)</span> is independent of the potential health outcomes.</p></li>
</ul>
</section>
<section id="conditional-exogeneity" class="slide level2">
<h2>Conditional Exogeneity</h2>
<ul>
<li><p>The following provides a formal assumption under which we can eliminate the confounding bias by controlling for <span class="math inline">\(X\)</span>.</p></li>
<li><p><strong>Conditional Ignorability/ Exogeneity:</strong> Suppose that treatment status <span class="math inline">\(D\)</span> is independent of potential outcomes <span class="math inline">\(Y(d)\)</span> conditional on a set of covariates <span class="math inline">\(X\)</span>; that is, for each <span class="math inline">\(d\)</span>: <span class="math display">\[
D \perp \!\!\! \perp Y(d) \mid X.
\]</span></p></li>
<li><p>You may wonder why the term “ignorability” is used. The distribution of <span class="math inline">\(Y(d)\)</span> depends only on <span class="math inline">\(X\)</span> and not on <span class="math inline">\(D\)</span>, so the latter is “ignorable”.</p></li>
<li><p>Note that the conventional name used in econometrics for the ignorability assumption is <strong>conditional exogeneity</strong>.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>We can learn about the causal effect of <span class="math inline">\(D\)</span> by comparing outcomes across treated and control units who have identical characteristics <span class="math inline">\(X=x\)</span> under the conditional exogeneity assumption.</p></li>
<li><p>The idea of comparing observations who have identical characteristics is the essence of the so-called <em>conditioning</em> strategy to learning causal effects.</p></li>
<li><p>As conditioning approaches produce a different contrast for every potential value of <span class="math inline">\(X\)</span>, we may also wish to average the contrasts at different values of <span class="math inline">\(X\)</span> over the distribution of characteristics to produce a summary measure of the causal effects.</p></li>
</ul>
</section>
<section id="overlapfull-support" class="slide level2">
<h2>Overlap/Full Support</h2>
<ul>
<li><p>The conditional probability of receiving treatment, <em>the propensity score</em>, plays an important role in this approach.</p></li>
<li><p><strong>Overlap/Full Support:</strong> The probability of receiving treatment given <span class="math inline">\(X\)</span>, the propensity score <span class="math inline">\(p(X) := \Pr(D=1|X)\)</span>, is non-degenerate: <span class="math display">\[
\Pr(0 &lt; p(X) &lt; 1) = 1.
\]</span></p></li>
<li><p>The overlap assumption requires that there is proper randomization or variation in <span class="math inline">\(D\)</span> at each value <span class="math inline">\(x\)</span> in the support of <span class="math inline">\(X\)</span>.</p></li>
<li><p>Without this condition, there are values <span class="math inline">\(x\)</span> in the support of <span class="math inline">\(X\)</span> where we cannot construct a contrast between treatment and control units.</p></li>
<li><p>We cannot learn the conditional average treatment effect at these values of <span class="math inline">\(X\)</span> and thus are also unable to learn the unconditional average effect of the treatment.</p></li>
</ul>
</section>
<section id="conditioning-on-x-removes-selection-bias" class="slide level2">
<h2>Conditioning on <span class="math inline">\(X\)</span> Removes Selection Bias</h2>
<div id="thm-conditioning" class="theorem">
<p><span class="theorem-title"><strong>Theorem 1</strong></span> Under Conditional Ignorability and Overlap, the conditional expectation function of observed outcome <span class="math inline">\(Y\)</span> given <span class="math inline">\(D=d\)</span> and <span class="math inline">\(X\)</span> recovers the conditional expectation of the potential outcome <span class="math inline">\(Y(d)\)</span> given <span class="math inline">\(X\)</span>: <span class="math display">\[
\mathbb{E}[Y \mid D=d, X ]= \mathbb{E}[Y(d) \mid D=d, X] = \mathbb{E}[Y(d) \mid X].
\]</span></p>
</div>
<ul>
<li>To prove <a href="#/conditioning-on-x-removes-selection-bias" class="quarto-xref">Theorem&nbsp;1</a>, note that the overlap assumption makes it possible to condition on the events <span class="math inline">\(\{D=0, X\}\)</span> and <span class="math inline">\(\{D=1, X\}\)</span> at any value in the support of <span class="math inline">\(X\)</span> and that the second equality holds by conditional exogeneity/ignorability.</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Hence, the Conditional Average Predictive Effect (CAPE), <span class="math display">\[
\pi(X) = \mathbb{E}[Y \mid D=1, X] -  \mathbb{E}[Y \mid D=0, X],
\]</span> is equal to the Conditional Average Treatment Effect (CATE), <span class="math display">\[
\delta(X) = \mathbb{E}[Y(1) \mid X] - \mathbb{E}[Y(0) \mid X ].
\]</span> Thus, the APE and ATE also agree: <span class="math display">\[
\delta = \mathbb{E}[\delta(X)] = \mathbb{E}[\pi(X)] = \pi.
\]</span></li>
</ul>
<!-- ## Consistency -->
<!-- - **Consistency:** Suppose that $Y$ is generated as $Y := Y(D)$. -->
</section>
<section id="conditional-exogeneity-via-causal-diagrams" class="slide level2">
<h2>Conditional Exogeneity via Causal Diagrams</h2>
<ul>
<li>It is possible to illustrate the previous set-up and assumptions graphically as follows:</li>
</ul>

<img data-src="dag3.png" class="r-stretch"></section>
<section class="slide level2">

<ul>
<li><p>In this graph, we show the potential outcome <span class="math inline">\(Y(d)\)</span> as a node and the potential treatment status <span class="math inline">\(d\)</span> as another node. The latter node is deterministic.</p></li>
<li><p>There is an arrow from <span class="math inline">\(d\)</span> to <span class="math inline">\(Y(d)\)</span> indicating the dependency.</p></li>
<li><p>The pre-treatment covariates <span class="math inline">\(X\)</span> affect both the realized treatment variable <span class="math inline">\(D\)</span> and the potential outcomes <span class="math inline">\(Y(d)\)</span>, as shown by the arrow from <span class="math inline">\(X\)</span> to <span class="math inline">\(D\)</span> and from <span class="math inline">\(X\)</span> to <span class="math inline">\(Y(d)\)</span>.</p></li>
<li><p>The assigned treatment variable <span class="math inline">\(D\)</span> is independent of the node <span class="math inline">\(d \mapsto Y(d)\)</span>, conditional on <span class="math inline">\(X\)</span>, which is shown by the absence of the arrow between these two nodes.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>The potential outcome process <span class="math inline">\(d \mapsto Y(d)\)</span> and treatment assignment jointly determine the realized outcome variable <span class="math inline">\(Y\)</span> via the assignment <span class="math inline">\(Y := Y(D)\)</span>. This generates the following causal diagram:</li>
</ul>

<img data-src="dag4.png" class="r-stretch"></section>
<section class="slide level2">

<ul>
<li>This graph says that <span class="math inline">\(X\)</span> is generated first. <span class="math inline">\(D\)</span> is then generated, with the distribution of <span class="math inline">\(D\)</span> depending on <span class="math inline">\(X\)</span>. Finally, <span class="math inline">\(Y\)</span> is generated, with its distribution depending on both <span class="math inline">\(D\)</span> and <span class="math inline">\(X\)</span>. Here, after conditioning on <span class="math inline">\(X\)</span>, the statistical dependence (association) between <span class="math inline">\(D\)</span> and <span class="math inline">\(Y\)</span> only reflects the causal channel, <span class="math inline">\(D \to Y\)</span> allowing us to uncover the ATE, for example.</li>
</ul>
</section>
<section id="identification-using-propensity-scores" class="slide level2">
<h2>Identification Using Propensity Scores</h2>
<ul>
<li>The fact that conditioning on the right set of controls removes selection bias has long been recognized by researchers employing regression methods. Rosenbaum and Rubin made the much more subtle point that conditioning on only the propensity score <span class="math display">\[
p(X) = \Pr[D=1 \mid X]
\]</span> also suffices to remove the selection bias.</li>
</ul>
<div id="thm-prop" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2 (Rosenbaum and Rubin: Conditioning on the Propensity Score Removes Selection Bias)</strong></span> Under Exogeneity and Overlap, <span class="math inline">\(D\)</span> is generated independently of <span class="math inline">\(Y(d)\)</span> for each <span class="math inline">\(d\)</span>, conditional on the propensity score <span class="math inline">\(p(X)\)</span>: For each <span class="math inline">\(d\)</span>, <span class="math display">\[
D \perp \!\!\! \perp Y(d) \mid p(X).
\]</span></p>
</div>
</section>
<section class="slide level2">

<ul>
<li><p>In other words, conditional on <span class="math inline">\(p(X) =p\)</span>, variation in <span class="math inline">\(D\)</span> is as good as randomly assigned. This fact makes <span class="math inline">\(p(X)\)</span> a “minimal sufficient” statistic, conditioning on which removes selection bias under ignorability.</p></li>
<li><p>Conditioning on the propensity score rather than <span class="math inline">\(X\)</span> itself is a useful empirical strategy when <span class="math inline">\(X\)</span> is high dimensional and <span class="math inline">\(p(X)\)</span> is available (in stratified RCTs) or can be approximated accurately.</p></li>
<li><p>An interesting example where the propensity score is not known but can be well-approximated is the examination in <span class="citation" data-cites="angrist2016">Abdulkadiroğlu et al. (<a href="#/bibliography" role="doc-biblioref" onclick="">2017</a>)</span> of the causal effect of attendance at a particular school or group of schools relative to one or more alternative schools (e.g., “elite” vs.&nbsp;“non-elite” schools) in settings where matching algorithms are used to assign students to schools. In this example, we can think of these student assignment mechanisms as <span class="math inline">\(p(X).\)</span></p></li>
<li><p>In such scenarios, we can simply use <span class="math inline">\(p(X)\)</span> as a control in place of the high dimensional set of characteristics, <span class="math inline">\(X\)</span>, and thus bypass a potentially complicated high dimensional estimation problem.</p></li>
</ul>
</section>
<section id="identification-by-propensity-score-reweighting" class="slide level2">
<h2>Identification by Propensity Score Reweighting</h2>
<ul>
<li>An alternative approach, known as the Horvitz-Thompson method (<span class="citation" data-cites="HT">Horvitz and Thompson (<a href="#/bibliography" role="doc-biblioref" onclick="">1952</a>)</span>), uses propensity score reweighting to recover averages of potential outcomes.</li>
</ul>
<div id="thm-horwitz" class="theorem">
<p><span class="theorem-title"><strong>Theorem 3 (Horvitz-Thompson: Propensity Score Reweighting Removes Bias)</strong></span> Under Conditional Exogeneity and Overlap, the conditional expectation of an appropriately reweighed observed outcome <span class="math inline">\(Y\)</span>, given <span class="math inline">\(X\)</span>, identifies the conditional average of potential outcome <span class="math inline">\(Y(d)\)</span> given <span class="math inline">\(X\)</span>: <span class="math display">\[
\mathbb{E}[ Y 1(D=d)/\Pr(D=d|X) \mid X ]  =  \mathbb{E} [ Y(d) \mid X ]
\]</span> Then, averaging over <span class="math inline">\(X\)</span> identifies the average potential outcome: <span class="math display">\[
\mathbb{E} [ Y 1(D=d)/\Pr(D=d|X)  ]  =  \mathbb{E}[ Y(d)  ]
\]</span></p>
</div>
</section>
<section class="slide level2">

<ul>
<li>To prove this result, note</li>
</ul>
<p><span class="math display">\[
\begin{eqnarray*}
&amp;&amp; \quad \mathbb{E}[ Y 1(D=d)/\Pr(D=d|X) \mid X ]  \\
&amp;&amp;=\mathbb{E}[ Y 1(D=d)  \mid X ]/\Pr(D=d|X) \\
&amp;&amp;  = \mathbb{E} [ Y(d) \mid X] \mathbb{E}[1(D=d)\mid X] /\Pr(D=d|X) \\
&amp;&amp;  = \mathbb{E}[Y(d) \mid X],
\end{eqnarray*}
\]</span> where we used the conditional ignorability in the second equality.</p>
<ul>
<li><p>As a consequence, we can identify average treatment effects by simple averaging of transformed outcomes: <span class="math display">\[
\delta = \mathbb{E}[Y H], \quad   H = \frac{ 1(D=1)}{\Pr(D=1|X)}- \frac{1(D=0)}{\Pr(D=0|X) },
\]</span> where <span class="math inline">\(H\)</span> is called the Horvitz-Thompson transform.</p></li>
<li><p>Note that this reduces to the difference of means in the control and treatment groups when the propensity score is constant.</p></li>
</ul>
</section>
<section id="stratified-rcts" class="slide level2">
<h2>Stratified RCTs</h2>
<ul>
<li><p><strong>Generalized/Stratified RCT:</strong> If under conditional exogeneity and consistency, the propensity score <span class="math inline">\(p(X)\)</span> is known, the setting is called a generalized or stratified RCT.</p></li>
<li><p>In the case, we are essentially back to a classical RCT.</p></li>
<li><p>Propensity score reweighting is generally not the most efficient approach to estimating treatment effects from statistical point of view because it ignores any dependence between the outcomes and controls, <span class="math inline">\(X\)</span>, that is not captured by the propensity score.</p></li>
<li><p>By exploiting dependence between the outcomes and <span class="math inline">\(X\)</span> not captured by the propensity score, more efficient estimation of treatment can occur as using this dependence “de-noises” the outcome.</p></li>
<li><p>Moreover, estimation based on only propensity score reweighting fails under imbalances that might arise due to imperfect data collection.</p></li>
</ul>
</section>
<section id="covariate-balance-checks" class="slide level2">
<h2>Covariate Balance Checks</h2>
<ul>
<li><p>Given a propensity score <span class="math inline">\(p(X)\)</span>, which is available in the stratified RCT settings outlined above, we can check if the RCT is valid (randomization is successful) by performing a <strong>covariate balance check</strong>: <span class="math display">\[
\mathbb{E}[H \mid X] =0.
\]</span></p></li>
<li><p>In a linear framework, this check can be done by running a regression of <span class="math inline">\(H\)</span> on <span class="math inline">\(W\)</span>, a dictionary of transformations of <span class="math inline">\(X\)</span>, and testing if <span class="math inline">\(W\)</span> predicts <span class="math inline">\(H\)</span>. <span class="math inline">\(W\)</span> predicting <span class="math inline">\(H\)</span> suggests that the RCTs randomization protocol did not go as planned.</p></li>
<li><p>In the <a href="https://drive.google.com/file/d/1oZWXhKgISYtGGhuyvcxhryXHGtkIXcuU/view?usp=sharing">reemployment experiment</a>, we observed that the balance did not seem satisfied across age groups; specifically, we found more younger workers in the control group. Hence, further controlling for age makes sense and results in modest changes to estimates of the treatment effect.</p></li>
<li><p>Of course, there is no guarantee that controlling for observed covariates can overcome selection bias in compromised RCTs in general because unobserved covariates may be driving the bias.</p></li>
</ul>
</section>
<section id="average-treatment-effect-for-groups-and-on-the-treated" class="slide level2">
<h2>Average Treatment Effect for Groups and on the Treated</h2>
<ul>
<li><p>In addition to unconditional average treatment effects (ATE) or average treatment effects at specific values of the covariates <span class="math inline">\(X=x\)</span>, we may be interested in average effects within specific subpopulations.</p></li>
<li><p>A leading example of an interesting subpopulation treatment effect is a group ATE (GATE): <span class="math display">\[
\bar \delta = \mathbb{E}[ Y(1) - Y(0) |G=1]
\]</span> where <span class="math inline">\(G\)</span> is a group indicator defined in terms of <span class="math inline">\(X\)</span>’s, such as <span class="math inline">\(G= 1(X \in R)\)</span> where <span class="math inline">\(R\)</span> is a region.</p></li>
<li><p>For example, we might be interested in the effects of a training program among younger people, say between 18 and 30 years old (<span class="math inline">\(G = 1(18 \leq age \leq 30)\)</span>); among people older than 30 years old (so <span class="math inline">\(G = 1(30 &lt; age)\)</span>); and differences between these two groups.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>We can immediately obtain the GATE using the identification results above and law of iterated expectations:</li>
</ul>
<p><span class="math display">\[
\begin{align*}
\mathbb{E}[ Y(1) - Y(0) |G=1] &amp;= \mathbb{E} [\mathbb{E}[Y|D=1,X] - \mathbb{E}[Y|D=0,X]|G=1] \\
&amp;= \mathbb{E}[ H Y |G =1].
\end{align*}
\]</span></p>
<ul>
<li>That is, we can identify GATEs either by taking the difference in regression functions or applying propensity score reweighting of outcomes and then averaging over group <span class="math inline">\(G\)</span>.</li>
</ul>
</section>
<section id="average-treatment-effect-on-the-treatet" class="slide level2">
<h2>Average Treatment Effect on the Treatet</h2>
<ul>
<li>We next consider treatment effects for the subpopulation of treated units, the <em>average treatment effect on the treated</em> (ATET):</li>
</ul>
<p><span class="math display">\[
\delta_1 = \mathbb{E}[(Y(1) -  Y(0) \mid D = 1].
\]</span></p>
<ul>
<li>For example, consider training completion as treatment, <span class="math inline">\(D\)</span>, and <span class="math inline">\(X\)</span> a vector of pre-treatment variables such that unconfoundedness holds. Consider the question:</li>
</ul>
<p><strong>How much more do trainees earn on average after going through the training program?</strong></p>
<ul>
<li>The ATET, <span class="math inline">\(\delta_1\)</span>, is the parameter that answers such questions about counterfactuals. The ATET is identified by <span class="math display">\[
\mathbb{E} [\mathbb{E}[Y|D=1,X] - \mathbb{E}[Y|D=0,X] \mid D=1].
\]</span></li>
</ul>
</section>
<section id="connection-to-linear-regression" class="slide level2">
<h2>Connection to Linear Regression</h2>
<ul>
<li><p>Our tools can be used to perform statistical inference on ATEs.</p></li>
<li><p>We briefly discuss how (high dimensional) regression can be used to retrieve causal estimates when conditional ignorability/exogeneity holds.</p></li>
<li><p>The simplest instance of the problem is when the conditional expectation function of <span class="math inline">\(Y\)</span> given <span class="math inline">\(D\)</span> and <span class="math inline">\(X\)</span> is linear, <span class="math display">\[
\mathbb{E}[Y \mid D, X] = \alpha D + \beta' W,
\]</span> which gives a model <span class="math display">\[
Y = \alpha D + \beta'W + \varepsilon, \quad \mathbb{E}[\varepsilon \mid D, X] =0.
\]</span></p></li>
<li><p>In this model, <span class="math inline">\(\alpha\)</span> identifies <span class="math inline">\(\delta\)</span>, <span class="math inline">\(\delta = \alpha\)</span>, under the linearity assumption and exogeneity, and our inference tools for <span class="math inline">\(\alpha\)</span> automatically carry over to <span class="math inline">\(\delta\)</span>.</p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>Of course, the assumption of linearity is restrictive. A simple way to relax this is to consider interactions. One version of this approach takes all interactions and assumes <span class="math display">\[
\mathbb{E}[Y \mid D, X] = \alpha_1 D + \alpha_2 DW + \beta_1 + \beta' W,
\]</span> where we also maintain that we are working with centered covariates: <span class="math inline">\(\mathbb{E}[W] = 0\)</span>.</p></li>
<li><p>This model is still linear and results for linear models carry over to this case as well.</p></li>
<li><p>We then recover the ATE as <span class="math inline">\(\delta = \alpha_1\)</span> and CATE as <span class="math display">\[
\delta(X) = \alpha_1+ \alpha_2' W.
\]</span></p></li>
<li><p>We can use partialling out methods, such as OLS in low-dimensional case and Double Lasso (and variants) in high-dimensional case, to perform inference on <span class="math inline">\(\alpha_1\)</span> and components of <span class="math inline">\(\alpha_2\)</span>, or even <span class="math inline">\(\beta_1\)</span>.</p></li>
</ul>
</section>
<section id="what-if-the-propensity-score-is-known" class="slide level2">
<h2>What if the propensity score is known?</h2>
<ul>
<li><p>When the propensity score <span class="math inline">\(p(X)\)</span> is known, we can include is as part of <span class="math inline">\(W\)</span> in the formulations from the previous section.</p></li>
<li><p>Another useful strategy is to consider regression models where <span class="math inline">\(HY\)</span> is the dependent variable (<span class="citation" data-cites="duflo">Chernozhukov et al. (<a href="#/bibliography" role="doc-biblioref" onclick="">2018</a>)</span>):</p></li>
</ul>
<p><span class="math display">\[
\mathbb{E}[ HY \mid H, X] = \alpha_1 + \alpha_2'W + \beta_1 H + \beta_2'HW.
\]</span></p>
<ul>
<li><p>In this regression model, we recover the ATE as <span class="math inline">\(\delta = \alpha_1\)</span> and CATE as <span class="math inline">\(\delta(X) = \alpha_1+ \alpha_2'W\)</span>.</p></li>
<li><p>We can use partialling out methods, such as Double Lasso, to perform inference on <span class="math inline">\(\alpha_1\)</span> and components of <span class="math inline">\(\alpha_2\)</span>.</p></li>
<li><p>We also discuss inference on CATE using more general machine learning methods in later lectures.</p></li>
</ul>
</section>
<section id="bibliography" class="slide level2 smaller scrollable">
<h2>Bibliography</h2>
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p>CML</p>
</div>
</div>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-angrist2016" class="csl-entry" role="listitem">
Abdulkadiroğlu, Atila, Joshua D. Angrist, Yusuke Narita, and Parag A. Pathak. 2017. <span>“Research Design Meets Market Design: Using Centralized Assignment for Impact Evaluation.”</span> <em>Econometrica</em> 85 (5): 1373–1432. <a href="https://onlinelibrary.wiley.com/doi/abs/10.3982/ECTA13925?casa_token=mHvdw9so6jEAAAAA:LYsj6NJfLrj1MULvRXhkUwSL3GPQv3RTNQVwPc9PRcCHG1xqCY_bhXgEhdbvY2L0st_kbwcpnJ20JA">https://onlinelibrary.wiley.com/doi/abs/10.3982/ECTA13925?casa_token=mHvdw9so6jEAAAAA:LYsj6NJfLrj1MULvRXhkUwSL3GPQv3RTNQVwPc9PRcCHG1xqCY_bhXgEhdbvY2L0st_kbwcpnJ20JA</a>.
</div>
<div id="ref-duflo" class="csl-entry" role="listitem">
Chernozhukov, Victor, Mert Demirer, Esther Duflo, and Iván Fernández-Val. 2018. <span>“Generic Machine Learning Inference on Heterogeneous Treatment Effects in Randomized Experiments, with an Application to Immunization in India.”</span> National Bureau of Economic Research.
</div>
<div id="ref-HT" class="csl-entry" role="listitem">
Horvitz, Daniel G., and Donovan J. Thompson. 1952. <span>“A Generalization of Sampling Without Replacement from a Finite Universe.”</span> <em>Journal of the American Statistical Association</em> 47 (260): 663–85.
</div>
<div id="ref-rubin74" class="csl-entry" role="listitem">
Rubin, Donald B. 1974. <span>“Estimating Causal Effects of Treatments in Randomized and Nonrandomized Studies.”</span> <em>Journal of Educational Psychology</em> 66 (5): 688–701.
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="L5_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="L5_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="L5_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="L5_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="L5_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="L5_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="L5_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="L5_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="L5_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="L5_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="L5_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5,"theme":"chalkboard"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>